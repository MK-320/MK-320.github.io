import{d as j,am as D,L as O,p as d,h as P,q as T,c as l,o as a,n as U,ag as _,F as q,e as t,j as F,r as c,an as E,K as I,k as K,b as h,Z as L,ao as Z,P as G}from"./framework.B1MQ1pB5.js";import{_ as k}from"./icon.vue_vue_type_script_setup_true_lang.D7tEEnE3.js";const ae=Symbol("formContextKey"),H=Symbol("formItemContextKey"),J={key:0,class:"vm-input__prepend"},Q={class:"vm-input__wrapper"},W={key:0,class:"vm-input__prefix"},X=["type","disabled","autocomplete","placeholder","readonly","autofocus","form"],Y={key:1,class:"vm-input__append"},x=["disabled","autocomplete","placeholder","readonly","autofocus","form"],oe=j({name:"VmInput",inheritAttrs:!1,__name:"Input",props:{type:{default:"text"},modelValue:{},size:{},disabled:{type:Boolean},clearable:{type:Boolean},showPassword:{type:Boolean},placeholder:{},readonly:{type:Boolean},autocomplete:{default:"off"},autofocus:{type:Boolean},form:{}},emits:["update:modelValue","input","change","focus","blur","clear"],setup(z,{expose:M,emit:A}){const b=D(),n=z,m=O(H),f=e=>{m==null||m.validate(e).catch(u=>{console.log(u.errors)})},o=A,s=d(n.modelValue),p=d(!1),r=d(!1),i=d(),w=P(()=>n.clearable&&!n.disabled&&!!s.value&&p.value),v=P(()=>n.showPassword&&!n.disabled&&!!s.value),N=()=>{},R=async()=>{await G(),i.value.focus()},V=()=>{r.value=!r.value},$=()=>{o("update:modelValue",s.value),o("input",s.value),f("input")},C=()=>{o("change",s.value),f("change")},g=e=>{p.value=!0,o("focus",e)},B=e=>{p.value=!1,o("blur",e),f("blur")},S=()=>{s.value="",o("update:modelValue",""),o("clear"),o("input",""),o("change","")};return T(()=>n.modelValue,e=>{s.value=e}),M({ref:i}),(e,u)=>(a(),l("div",{class:U(["vm-input",{[`vm-input--${e.type}`]:e.type,[`vm-input--${e.size}`]:e.size,"is-disabled":e.disabled,"is-prepend":e.$slots.prepend,"is-append":e.$slots.append,"is-prefix":e.$slots.prefix,"is-suffix":e.$slots.suffix,"is-focus":p.value}])},[e.type!=="textarea"?(a(),l(q,{key:0},[e.$slots.prepend?(a(),l("div",J,[c(e.$slots,"prepend")])):t("",!0),F("div",Q,[e.$slots.prefix?(a(),l("span",W,[c(e.$slots,"prefix")])):t("",!0),_(F("input",I({class:"vm-input__inner"},K(b),{ref_key:"inputRef",ref:i,type:e.showPassword?r.value?"text":"password":e.type,disabled:e.disabled,autocomplete:e.autocomplete,placeholder:e.placeholder,readonly:e.readonly,autofocus:e.autofocus,form:e.form,"onUpdate:modelValue":u[0]||(u[0]=y=>s.value=y),onInput:$,onChange:C,onFocus:g,onBlur:B}),null,16,X),[[E,s.value]]),e.$slots.suffix||w.value||v.value?(a(),l("span",{key:1,class:"vm-input__suffix",onClick:R},[c(e.$slots,"suffix"),w.value?(a(),h(k,{key:0,icon:"circle-xmark",class:"vm-input__clear",onClick:S,onMousedown:L(N,["prevent"])})):t("",!0),v.value&&r.value?(a(),h(k,{key:1,icon:"eye",class:"vm-input__password",onClick:V})):t("",!0),v.value&&!r.value?(a(),h(k,{key:2,icon:"eye-slash",class:"vm-input__password",onClick:V})):t("",!0)])):t("",!0)]),e.$slots.append?(a(),l("div",Y,[c(e.$slots,"append")])):t("",!0)],64)):_((a(),l("textarea",I({key:1,class:"vm-textarea__wrapper"},K(b),{ref_key:"inputRef",ref:i,disabled:e.disabled,autocomplete:e.autocomplete,placeholder:e.placeholder,readonly:e.readonly,autofocus:e.autofocus,form:e.form,"onUpdate:modelValue":u[1]||(u[1]=y=>s.value=y),onInput:$,onChange:C,onFocus:g,onBlur:B}),null,16,x)),[[Z,s.value]])],2))}});export{oe as _,H as a,ae as f};
